var D=Object.defineProperty;var k=(r,a,t)=>a in r?D(r,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[a]=t;var f=(r,a,t)=>(k(r,typeof a!="symbol"?a+"":a,t),t);import{d as z,k as w,s as B,G as C,o as I,f as q,O as A,H as T,_ as F}from"./index-35ec7750.js";const R=(r,a)=>Math.floor(Math.random()*(a-r+1)+r),N={class:"content"},V={class:"canvasTime"},j=z({__name:"canvasTime",setup(r){class a{constructor(s){f(this,"x",0);f(this,"y",0);f(this,"size",0);f(this,"ctx");if(!t.value)return;this.ctx=s,this.size=R(2*window.devicePixelRatio,4*window.devicePixelRatio);const n=Math.min(t.value.width,t.value.height)/2,h=R(0,360)*Math.PI/180,c=t.value.width/2,l=t.value.height/2;this.x=c+n*Math.cos(h),this.y=l+n*Math.sin(h)}draw(){this.ctx&&(this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.size,0,Math.PI*2),this.ctx.fillStyle="#ccc",this.ctx.fill())}moveTo(s,n){const c=this.x,l=this.y,_=(s-c)/300,i=(n-l)/300,o=Date.now(),u=()=>{const v=Date.now()-o,m=c+_*v,p=l+i*v;if(this.x=m,this.y=p,v>=300){this.x=s,this.y=n;return}requestAnimationFrame(u)};u()}}const t=w(),d=w([]),x=w(""),P=()=>{t.value&&(t.value.width=500*window.devicePixelRatio,t.value.height=200*window.devicePixelRatio)},g=e=>{var s,n;t.value&&e.clearRect(0,0,(s=t.value)==null?void 0:s.width,(n=t.value)==null?void 0:n.height)},y=e=>{if(t.value){g(e),S(e);for(const s of d.value)s.draw();requestAnimationFrame(()=>y(e))}},M=()=>new Date().toTimeString().substring(0,8),S=e=>{const s=M();if(x.value===s)return;x.value=s;const n=t.value.width,h=t.value.height;e.fillStyle="#000",e.textBaseline="middle",e.textAlign="center",e.font=`${120*window.devicePixelRatio}px sans-serif`,e.fillText(x.value,n/2,h/2);const c=[],{data:l}=e.getImageData(0,0,n,h),_=6;for(let i=0;i<n;i+=_)for(let o=0;o<h;o+=_){const u=(i+o*n)*4,[v,m,p,b]=[l[u],l[u+1],l[u+2],l[u+3]];v===0&&m===0&&p===0&&b===255&&c.push([i,o])}g(e),d.value.length>c.length&&d.value.splice(c.length);for(let i=0;i<c.length;i++){let o=d.value[i];o||(o=new a(e),d.value.push(o));const[u,v]=c[i];o.moveTo(u,v)}};return B(()=>{var s;P();const e=(s=t.value)==null?void 0:s.getContext("2d",{willReadFrequently:!0});e&&y(e)}),(e,s)=>{const n=C("v-md-preview");return I(),q("div",N,[A(n,{text:`
> canvas 粒子绘画指定文字
`}),T("div",V,[T("canvas",{ref_key:"canvasRef",ref:t},null,512)])])}}});const H=F(j,[["__scopeId","data-v-3fb36900"]]);export{H as default};
